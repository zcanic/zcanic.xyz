# Council AI å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ ç»Ÿä¸€éƒ¨ç½²ç®¡ç†å™¨

ä½¿ç”¨ç»Ÿä¸€çš„éƒ¨ç½²ç®¡ç†å™¨ï¼Œé¿å…è„šæœ¬ç¢ç‰‡åŒ–ï¼š

```bash
# å®Œæ•´éƒ¨ç½²ï¼ˆæ¨èï¼‰
./deploy-manager.sh deploy

# ä»…æ„å»º
./deploy-manager.sh build

# å¯åŠ¨æœåŠ¡
./deploy-manager.sh start

# æŸ¥çœ‹çŠ¶æ€
./deploy-manager.sh status

# å¥åº·æ£€æŸ¥
./deploy-manager.sh health

# æŸ¥çœ‹å¸®åŠ©
./deploy-manager.sh help
```

## ğŸ“‹ éƒ¨ç½²ç®¡ç†å™¨åŠŸèƒ½

- `build` - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- `deploy` - å®Œæ•´éƒ¨ç½²ï¼ˆæ„å»º + é…ç½® + å¯åŠ¨ï¼‰
- `start` - å¯åŠ¨æœåŠ¡
- `stop` - åœæ­¢æœåŠ¡  
- `restart` - é‡å¯æœåŠ¡
- `status` - æŸ¥çœ‹æœåŠ¡çŠ¶æ€
- `check-db` - æ£€æŸ¥æ•°æ®åº“
- `reset-db` - é‡ç½®æ•°æ®åº“
- `health` - å¥åº·æ£€æŸ¥
- `logs` - æŸ¥çœ‹æ—¥å¿—

## ğŸ­ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

å¯¹äºç”Ÿäº§æœåŠ¡å™¨ï¼Œä½¿ç”¨ä¸“ç”¨éƒ¨ç½²è„šæœ¬ï¼š

```bash
# ç”Ÿäº§ç¯å¢ƒä¸€é”®éƒ¨ç½²
./production-deploy.sh

# å¼ºåˆ¶éƒ¨ç½²ï¼ˆéç”Ÿäº§ç¯å¢ƒï¼‰
./production-deploy.sh --force
```

ç”Ÿäº§éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. åœæ­¢ç°æœ‰æœåŠ¡
2. å®‰è£…ä¾èµ–
3. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
4. åˆ›å»ºé…ç½®æ–‡ä»¶
5. å¯åŠ¨PM2æœåŠ¡
6. éªŒè¯éƒ¨ç½²

## ğŸ”§ ç«¯å£é…ç½®

- **å‰ç«¯**: ç«¯å£ 3002 (http://council.zcanic.xyz:3002)
- **åç«¯**: ç«¯å£ 3001 (éœ€è¦å•ç‹¬å¯åŠ¨)
- **æ•°æ®åº“**: ç«¯å£ 3306

## âš ï¸ é‡è¦æé†’

### åç«¯æœåŠ¡
ç¡®ä¿åŸæœ‰åç«¯æœåŠ¡è¿è¡Œåœ¨ **3001** ç«¯å£ï¼Œæä¾›ä»¥ä¸‹APIï¼š
- `/api/health`
- `/api/topics`
- `/api/topics/:id/rounds`
- `/api/rounds/:id/comments`
- `/api/ai/summarize`
- WebSocketè¿æ¥

### å¯åŠ¨åç«¯ç¤ºä¾‹
```bash
cd /path/to/original/backend
PORT=3001 npm start
# æˆ–è€…
PORT=3001 pm2 start app.js --name council-backend
```

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸ç”¨å‘½ä»¤
```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
./check-services.sh

# æŸ¥çœ‹æ—¥å¿—
./view-logs.sh

# é‡å¯æœåŠ¡
./restart-server.sh

# æµ‹è¯•éƒ¨ç½²
./test-deployment.sh

# é‡ç½®æ•°æ®åº“
npm run db:reset
```

### å¸¸è§é—®é¢˜

1. **ç«¯å£3000è¢«å ç”¨**
   ```bash
   pm2 stop all
   kill -9 $(lsof -t -i:3000)
   ```

2. **æ•°æ®åº“å­—æ®µé”™è¯¯**
   ```bash
   npm run db:reset
   ```

3. **APIè¿æ¥å¤±è´¥**
   - æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œåœ¨3001ç«¯å£
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

4. **WebSocketè¿æ¥å¤±è´¥**
   - ç¡®ä¿åç«¯æ”¯æŒWebSocket
   - æ£€æŸ¥ç«¯å£é…ç½®

## ğŸ“Š éªŒè¯æˆåŠŸ

éƒ¨ç½²æˆåŠŸåï¼Œåº”è¯¥å¯ä»¥ï¼š
- è®¿é—® http://council.zcanic.xyz:3002
- APIå¥åº·æ£€æŸ¥è¿”å›æ­£å¸¸
- æ•°æ®åº“è¿æ¥æ­£å¸¸
- WebSocketè¿æ¥æ­£å¸¸

## ğŸ“ é‡è¦æ–‡ä»¶

- `one-click-deploy.sh` - ä¸€é”®éƒ¨ç½²è„šæœ¬
- `deploy-production.sh` - ç”Ÿäº§éƒ¨ç½²è„šæœ¬
- `check-services.sh` - æœåŠ¡çŠ¶æ€æ£€æŸ¥
- `fix-websocket-config.sh` - é…ç½®ä¿®å¤
- `test-deployment.sh` - éƒ¨ç½²éªŒè¯
- `.env.production` - ç”Ÿäº§ç¯å¢ƒé…ç½®
- `PRODUCTION_DEPLOYMENT_GUIDE.md` - è¯¦ç»†éƒ¨ç½²æŒ‡å—

## ğŸ¯ ä¸‹ä¸€æ­¥

1. ç¡®ä¿åç«¯æœåŠ¡è¿è¡Œåœ¨3001ç«¯å£
2. è¿è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬
3. è®¿é—®åº”ç”¨éªŒè¯åŠŸèƒ½
4. æ ¹æ®éœ€è¦è°ƒæ•´é…ç½®