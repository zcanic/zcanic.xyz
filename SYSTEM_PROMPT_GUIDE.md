# 系统提示管理指南

## 概述

本文档说明如何管理和更新 Zcanic.xyz 网站的系统提示词。系统提示(System Prompt)是控制 AI 行为和风格的关键，为确保一致性，前端和后端现在使用统一的提示管理系统。

## 提示词位置

系统提示词定义在后端文件中:

```
server/config/prompts.js
```

此文件包含 `DEFAULT_SYSTEM_PROMPT` 常量，这是系统提示的主要来源。

## 修改流程

要修改系统提示，请按照以下步骤操作：

1. 编辑 `server/config/prompts.js` 文件中的 `DEFAULT_SYSTEM_PROMPT` 常量
2. 重启后端服务器（或等待自动重载）
3. 前端会自动从后端 API 获取更新后的提示词

无需修改前端文件 `src/config/prompts.js`，因为前端已配置为通过 API 获取系统提示词。

## 错误处理和回退机制

系统设计了完善的错误处理和回退机制：

1. 前端在启动时会尝试从 API 获取系统提示
2. 如果 API 请求失败，前端会使用本地的默认提示
3. 后端 API 有速率限制，防止过度请求
4. 后端实现了缓存机制，提高性能

## 宝塔部署注意事项

在宝塔环境部署时：

1. 确保 Node.js 版本 >= 14.0.0
2. 防火墙设置中开放 API 端点对应的端口
3. 配置正确的跨域设置（CORS）
4. 确保服务器有足够权限读取 prompts.js 文件

## 多端适配考虑

系统提示管理系统的 UI 在不同设备上有响应式设计：

1. **PC 端**: 完整显示提示词设置界面
2. **平板端**: 优化布局，保持所有功能
3. **移动端**: 简化界面，重点突出核心功能

## 测试和验证

修改系统提示后，建议进行以下测试：

1. 在开发环境中验证提示词是否正确传递
2. 检查不同设备上的 UI 表现
3. 验证错误场景下的回退机制
4. 检查 AI 响应是否符合新的提示词要求

## 故障排除

如遇问题，请检查：

1. 服务器日志中是否有 API 错误
2. 浏览器控制台中是否有请求失败信息
3. 确认 prompts.js 文件格式是否正确
4. 验证网络连接和 CORS 设置
